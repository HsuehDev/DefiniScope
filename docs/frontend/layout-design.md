# 前端布局和導航設計文檔

## 布局結構概述

前端應用採用多層次的布局結構，以提供彈性、響應式的用戶界面。主要布局組件包括：

1. **MainLayout**: 應用的主要布局，包含頂部導航欄、側邊欄和主內容區域
2. **ThreeColumnLayout**: 三欄式布局，用於在一個頁面中同時顯示檔案管理、聊天對話和參考資訊

## 布局組件詳細說明

### MainLayout

`MainLayout` 是一個包裹整個應用的容器，包含以下元素：

- **頂部導航欄 (Navbar)**: 顯示應用名稱、主要導航連結和用戶信息
- **側邊欄 (Sidebar)**: 提供主要功能模塊的導航，可以展開或折疊
- **主內容區域**: 顯示路由匹配的組件內容

#### 設計考量

1. **固定頂部導航**: 頂部導航欄採用固定定位，確保在滾動頁面時仍然可見
2. **可折疊側邊欄**: 側邊欄可以展開或折疊，適應不同的屏幕尺寸需求
3. **響應式主內容區**: 根據側邊欄的狀態自動調整其寬度和邊距

#### 實現技術

- 使用 TailwindCSS 的 `flex` 布局
- 使用 `classNames` 庫動態生成條件式類名
- 使用 React Router 的 `Outlet` 支持嵌套路由

### ThreeColumnLayout

`ThreeColumnLayout` 是一個專門設計的三欄式布局組件，特別適用於文件分析平台的核心功能頁面，包含：

- **左側面板**: 通常用於檔案管理和檔案列表
- **中間面板**: 通常用於聊天對話和查詢界面
- **右側面板**: 通常用於參考資訊和處理進度顯示

#### 設計考量

1. **可調整面板寬度**: 左右面板可以展開或折疊，使中間面板能夠擁有更多空間
2. **響應式切換**: 在小屏幕設備上，採用標籤式切換而不是同時顯示三個面板
3. **內容溢出處理**: 每個面板內的內容可以獨立滾動，保證良好的空間利用率

#### 響應式行為

- **大屏幕 (≥ 768px)**: 同時顯示三個面板，左右面板可以折疊
- **小屏幕 (< 768px)**: 顯示面板選擇器，一次只顯示一個面板

## 導航結構

### 頂部導航欄 (Navbar)

頂部導航欄提供全局導航和用戶操作：

- **應用名稱**: 點擊返回首頁
- **主要導航連結**: 檔案管理、智能對話等主要功能入口
- **用戶菜單**: 顯示當前用戶信息和退出選項

### 側邊欄 (Sidebar)

側邊欄提供主要功能模塊的導航：

- **檔案管理**: 查看和管理已上傳的檔案
- **智能對話**: 與系統進行互動查詢
- **上傳文件**: 上傳新的 PDF 文件
- **設定**: 用戶設定和偏好

#### 側邊欄狀態

- **展開狀態**: 顯示圖標和文本
- **折疊狀態**: 僅顯示圖標，節省空間

## 路由配置

### 主要路由結構

```
/                      # 首頁，未登入時重定向到登入頁
/login                 # 登入頁面
/register              # 註冊頁面
/app                   # 主應用 (受保護路由，需要認證)
/app/chat              # 智能對話
/app/chat/:conversationId  # 特定對話內容
/app/files             # 檔案管理
/app/upload            # 上傳文件
/app/settings          # 用戶設定
```

### 路由守衛

- 使用 `PrivateRoute` 組件保護需要認證的路由
- 未登入用戶訪問受保護路由會被重定向到登入頁面
- 登入後自動重定向回原來嘗試訪問的頁面

## 頁面切換與過渡效果

### 切換動畫

- 使用 CSS transitions 實現平滑的面板展開/折疊效果
- 頁面切換時使用漸隱/漸現效果，減少視覺跳轉感

### 頁面載入狀態

- 使用骨架屏或載入動畫指示頁面內容正在加載
- 使用 React Suspense 和 lazy loading 優化頁面載入性能

## 可訪問性考量

### 鍵盤導航

- 所有互動元素可通過鍵盤訪問
- 使用合適的 ARIA 標籤說明元素的角色和狀態
- 按邏輯順序設定 tab 索引

### 色彩對比

- 確保文本和背景之間有足夠的對比度
- 使用語義化的顏色表示不同的狀態和重要性

## 未來擴展計劃

1. **主題切換**: 支持亮色/暗色模式
2. **自定義面板布局**: 允許用戶自定義三欄式布局中各面板的寬度比例
3. **布局記憶**: 記住用戶上次使用的布局設置
4. **更細緻的響應式設計**: 針對不同尺寸的設備提供更優化的布局 